<?php /*

 ocPortal
 Copyright (c) ocProducts, 2004-2011

 See text/EN/licence.txt for full licencing information.


 NOTE TO PROGRAMMERS:
   Do not edit this file. If you need to make changes, save your changed file to the appropriate *_custom folder
   **** If you ignore this advice, then your website upgrades (e.g. for bug fixes) will likely kill your changes ****

*/

/**
 * @license		http://opensource.org/licenses/cpal_1.0 Common Public Attribution License
 * @copyright	ocProducts Ltd
 * @package		core_fields
 */

/**
 * Get a fields hook, from a given codename.
 *
 * @param  ID_TEXT		Codename
 * @return object			Hook object
 */
function get_fields_hook($type)
{
	$path='hooks/systems/fields/'.filter_naughty($type);
	if ((!is_file(get_file_base().'/sources/'.$path.'.php')) && (!is_file(get_file_base().'/sources_custom/'.$path.'.php')))
	{
		$hooks=find_all_hooks('systems','fields');
		foreach (array_keys($hooks) as $hook)
		{
			$path='hooks/systems/fields/'.filter_naughty($hook);
			require_code($path);
			$ob=object_factory('Hook_fields_'.filter_naughty($hook));
			if (method_exists($ob,'get_field_types'))
			{
				if (array_key_exists($type,$ob->get_field_types())) return $ob;
			}
		}
	}
	require_code($path);
	return object_factory('Hook_fields_'.filter_naughty($type));
}

