<?php /*

 ocPortal
 Copyright (c) ocProducts, 2004-2011

 See text/EN/licence.txt for full licencing information.


 NOTE TO PROGRAMMERS:
   Do not edit this file. If you need to make changes, save your changed file to the appropriate *_custom folder
   **** If you ignore this advice, then your website upgrades (e.g. for bug fixes) will likely kill your changes ****

*/

/**
 * @license		http://opensource.org/licenses/cpal_1.0 Common Public Attribution License
 * @copyright	ocProducts Ltd
 * @package		core
 */

/**
 * Standard code module initialisation function.
 */
function init__temporal()
{
	global $TIMEZONE_MEMBER_CACHE;
	$TIMEZONE_MEMBER_CACHE=array();
	
	initialise_timezone_data();
}

/**
 * Initialise timezone data.
 */
function initialise_timezone_data()
{
	global $TZ_ZONE_DATA;
	$TZ_ZONE_DATA = array(
		'Africa/Abidjan' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Accra' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Addis_Ababa' => array(180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Algiers' => array(60, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Asmara' => array(180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Bamako' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Bangui' => array(60, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Banjul' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Bissau' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Blantyre' => array(120, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Brazzaville' => array(60, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Bujumbura' => array(120, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Cairo' => array(120, array(0,0,23,5,8,0,4,0), 0, array(0,0,0,5,3,0,5,0), 60),
		'Africa/Casablanca' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Ceuta' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Africa/Conakry' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Dakar' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Dar_es_Salaam' => array(180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Djibouti' => array(180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Douala' => array(60, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/El_Aaiun' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Freetown' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Gaborone' => array(120, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Harare' => array(120, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Johannesburg' => array(120, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Kampala' => array(180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Khartoum' => array(180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Kigali' => array(120, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Kinshasa' => array(60, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Lagos' => array(60, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Libreville' => array(60, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Lome' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Luanda' => array(60, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Lubumbashi' => array(120, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Lusaka' => array(120, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Malabo' => array(60, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Maputo' => array(120, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Maseru' => array(120, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Mbabane' => array(120, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Mogadishu' => array(180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Monrovia' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Nairobi' => array(180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Ndjamena' => array(60, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Niamey' => array(60, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Nouakchott' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Ouagadougou' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Porto-Novo' => array(60, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Sao_Tome' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Tripoli' => array(120, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Africa/Tunis' => array(60, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,5,2,0,0,0), 60),
		'Africa/Windhoek' => array(60, array(0,0,2,1,8,0,0,0), 60, array(0,0,2,1,3,0,0,0), 0),
		'America/Adak' => array(-600, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Anchorage' => array(-540, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Anguilla' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Antigua' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Araguaina' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Argentina/Buenos_Aires' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Argentina/Catamarca' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Argentina/Cordoba' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Argentina/Jujuy' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Argentina/La_Rioja' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Argentina/Mendoza' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Argentina/Rio_Gallegos' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Argentina/San_Juan' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Argentina/Tucuman' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Argentina/Ushuaia' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Aruba' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Asuncion' => array(-240, array(0,0,0,2,2,0,0,0), 0, array(0,0,0,3,9,0,0,0), 60),
		'America/Atikokan' => array(-300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Bahia' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Barbados' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Belem' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Belize' => array(-360, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Blanc-Sablon' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Boa_Vista' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Bogota' => array(-300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Boise' => array(-420, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Cambridge_Bay' => array(-420, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Campo_Grande' => array(-240, array(0,0,0,1,10,0,0,0), 60, array(0,0,0,5,1,0,0,0), 0),
		'America/Cancun' => array(-360, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,1,3,0,0,0), 60),
		'America/Caracas' => array(-270, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Cayenne' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Cayman' => array(-300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Chicago' => array(-360, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Chihuahua' => array(-420, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,1,3,0,0,0), 60),
		'America/Costa_Rica' => array(-360, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Cuiaba' => array(-240, array(0,0,0,1,10,0,0,0), 60, array(0,0,0,5,1,0,0,0), 0),
		'America/Curacao' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Danmarkshavn' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Dawson' => array(-480, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Dawson_Creek' => array(-420, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Denver' => array(-420, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Detroit' => array(-300, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Dominica' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Edmonton' => array(-420, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Eirunepe' => array(-300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/El_Salvador' => array(-360, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Fortaleza' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Glace_Bay' => array(-240, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Godthab' => array(-180, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'America/Goose_Bay' => array(-240, array(0,1,0,2,2,0,0,0), 60, array(0,1,0,1,10,0,0,0), 0),
		'America/Grand_Turk' => array(-300, array(0,0,0,5,9,0,0,0), 0, array(0,0,0,1,3,0,0,0), 60),
		'America/Grenada' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Guadeloupe' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Guatemala' => array(-360, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Guayaquil' => array(-300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Guyana' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Halifax' => array(-240, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Havana' => array(-300, array(0,0,0,5,9,0,0,0), 0, array(0,0,0,1,3,0,0,0), 60),
		'America/Hermosillo' => array(-420, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Indiana/Indianapolis' => array(-300, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Indiana/Knox' => array(-360, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Indiana/Marengo' => array(-300, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Indiana/Petersburg' => array(-360, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Indiana/Vevay' => array(-300, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Indiana/Vincennes' => array(-360, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Inuvik' => array(-420, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Iqaluit' => array(-300, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Jamaica' => array(-300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Juneau' => array(-540, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Kentucky/Louisville' => array(-300, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Kentucky/Monticello' => array(-300, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/La_Paz' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Lima' => array(-300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Los_Angeles' => array(-480, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Maceio' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Managua' => array(-360, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Manaus' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Martinique' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Mazatlan' => array(-420, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,1,3,0,0,0), 60),
		'America/Menominee' => array(-360, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Merida' => array(-360, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,1,3,0,0,0), 60),
		'America/Mexico_City' => array(-360, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,1,3,0,0,0), 60),
		'America/Miquelon' => array(-180, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Moncton' => array(-240, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Monterrey' => array(-360, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,1,3,0,0,0), 60),
		'America/Montevideo' => array(-180, array(0,0,2,1,9,0,0,0), 60, array(0,0,2,2,2,0,0,0), 0),
		'America/Montreal' => array(-300, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Montserrat' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Nassau' => array(-300, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/New_York' => array(-300, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Nipigon' => array(-300, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Nome' => array(-540, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Noronha' => array(-120, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/North_Dakota/Center' => array(-360, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/North_Dakota/New_Salem' => array(-360, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Panama' => array(-300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Pangnirtung' => array(-300, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Paramaribo' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Phoenix' => array(-420, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Port-au-Prince' => array(-300, array(0,0,0,5,9,0,0,0), 0, array(0,0,0,1,3,0,0,0), 60),
		'America/Port_of_Spain' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Porto_Velho' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Puerto_Rico' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Rainy_River' => array(-360, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Rankin_Inlet' => array(-360, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Recife' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Regina' => array(-360, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Rio_Branco' => array(-300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Santiago' => array(-240, array(0,0,3,2,2,0,0,0), 0, array(0,0,4,2,9,0,0,0), 60),
		'America/Santo_Domingo' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Sao_Paulo' => array(-180, array(0,0,0,1,10,0,0,0), 60, array(0,0,0,5,1,0,0,0), 0),
		'America/Scoresbysund' => array(-60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'America/St_Johns' => array(-210, array(0,1,0,2,2,0,0,0), 60, array(0,1,0,1,10,0,0,0), 0),
		'America/St_Kitts' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/St_Lucia' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/St_Thomas' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/St_Vincent' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Swift_Current' => array(-360, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Tegucigalpa' => array(-360, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Thule' => array(-240, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Thunder_Bay' => array(-300, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Tijuana' => array(-480, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,1,3,0,0,0), 60),
		'America/Toronto' => array(-300, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Tortola' => array(-240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'America/Vancouver' => array(-480, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Whitehorse' => array(-480, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Winnipeg' => array(-360, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'America/Yakutat' => array(-540, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'America/Yellowknife' => array(-420, array(0,0,2,1,10,0,0,0), 0, array(0,0,2,2,2,0,0,0), 60),
		'Antarctica/Casey' => array(480, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Antarctica/Davis' => array(420, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Antarctica/DumontDUrville' => array(600, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Antarctica/Mawson' => array(360, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Antarctica/McMurdo' => array(720, array(0,0,2,1,9,0,0,0), 60, array(0,0,2,3,2,0,0,0), 0),
		'Antarctica/Palmer' => array(-240, array(0,0,4,2,9,0,0,0), 60, array(0,0,3,2,2,0,0,0), 0),
		'Antarctica/Rothera' => array(-180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Antarctica/Syowa' => array(180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Antarctica/Vostok' => array(360, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Aden' => array(180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Almaty' => array(360, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Amman' => array(120, array(0,0,0,5,2,0,4,0), 60, array(0,0,0,5,9,0,5,0), 0),
		'Asia/Anadyr' => array(720, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,5,2,0,0,0), 60),
		'Asia/Aqtau' => array(300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Aqtobe' => array(300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Ashgabat' => array(300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Baghdad' => array(180, array(0,0,3,1,3,1,7,0), 60, array(0,0,3,1,9,1,7,0), 0),
		'Asia/Bahrain' => array(180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Baku' => array(240, array(0,0,5,5,9,0,0,0), 0, array(0,0,4,5,2,0,0,0), 60),
		'Asia/Bangkok' => array(420, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Beirut' => array(120, array(0,0,0,5,2,0,0,0), 60, array(0,0,0,5,9,0,0,0), 0),
		'Asia/Bishkek' => array(360, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Brunei' => array(480, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Calcutta' => array(330, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Choibalsan' => array(540, array(0,0,2,5,2,0,6,0), 60, array(0,0,2,5,8,0,6,0), 0),
		'Asia/Chongqing' => array(480, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Colombo' => array(330, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Damascus' => array(120, array(0,0,0,1,9,1,7,0), 0, array(0,0,0,1,3,1,7,0), 60),
		'Asia/Dhaka' => array(360, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Dili' => array(540, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Dubai' => array(240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Dushanbe' => array(300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Gaza' => array(120, array(0,0,0,1,3,1,7,0), 60, array(0,0,0,3,9,0,5,0), 0),
		'Asia/Harbin' => array(480, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Hong_Kong' => array(480, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Hovd' => array(420, array(0,0,2,5,2,0,6,0), 60, array(0,0,2,5,8,0,6,0), 0),
		'Asia/Irkutsk' => array(480, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,5,2,0,0,0), 60),
		'Asia/Jakarta' => array(420, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Jayapura' => array(540, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Jerusalem' => array(120, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Kabul' => array(270, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Kamchatka' => array(720, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,5,2,0,0,0), 60),
		'Asia/Karachi' => array(300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Kashgar' => array(480, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Katmandu' => array(345, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Krasnoyarsk' => array(420, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,5,2,0,0,0), 60),
		'Asia/Kuala_Lumpur' => array(480, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Kuching' => array(480, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Kuwait' => array(180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Macau' => array(480, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Magadan' => array(660, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,5,2,0,0,0), 60),
		'Asia/Makassar' => array(480, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Manila' => array(480, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Muscat' => array(240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Nicosia' => array(120, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Asia/Novosibirsk' => array(360, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,5,2,0,0,0), 60),
		'Asia/Omsk' => array(360, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,5,2,0,0,0), 60),
		'Asia/Oral' => array(300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Phnom_Penh' => array(420, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Pontianak' => array(420, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Pyongyang' => array(540, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Qatar' => array(180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Qyzylorda' => array(360, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Rangoon' => array(390, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Riyadh' => array(180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Saigon' => array(420, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Sakhalin' => array(600, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,5,2,0,0,0), 60),
		'Asia/Samarkand' => array(300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Seoul' => array(540, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Shanghai' => array(480, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Singapore' => array(480, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Taipei' => array(480, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Tashkent' => array(300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Tbilisi' => array(240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Tehran' => array(210, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Thimphu' => array(360, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Tokyo' => array(540, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Ulaanbaatar' => array(480, array(0,0,2,5,2,0,6,0), 60, array(0,0,2,5,8,0,6,0), 0),
		'Asia/Urumqi' => array(480, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Vientiane' => array(420, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Asia/Vladivostok' => array(600, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,5,2,0,0,0), 60),
		'Asia/Yakutsk' => array(540, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,5,2,0,0,0), 60),
		'Asia/Yekaterinburg' => array(300, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,5,2,0,0,0), 60),
		'Asia/Yerevan' => array(240, array(0,0,2,5,2,0,0,0), 60, array(0,0,2,5,9,0,0,0), 0),
		'Atlantic/Azores' => array(-60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Atlantic/Bermuda' => array(-240, array(0,0,2,2,2,0,0,0), 60, array(0,0,2,1,10,0,0,0), 0),
		'Atlantic/Canary' => array(0, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Atlantic/Cape_Verde' => array(-60, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Atlantic/Faroe' => array(0, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Atlantic/Madeira' => array(0, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Atlantic/Reykjavik' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Atlantic/South_Georgia' => array(-120, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Atlantic/St_Helena' => array(0, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Atlantic/Stanley' => array(-240, array(0,0,2,1,8,0,0,0), 60, array(0,0,2,3,3,0,0,0), 0),
		'Australia/Adelaide' => array(570, array(0,0,2,5,2,0,0,0), 0, array(0,0,2,5,9,0,0,0), 60),
		'Australia/Brisbane' => array(600, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Australia/Broken_Hill' => array(570, array(0,0,2,5,2,0,0,0), 0, array(0,0,2,5,9,0,0,0), 60),
		'Australia/Currie' => array(600, array(0,0,2,5,2,0,0,0), 0, array(0,0,2,1,9,0,0,0), 60),
		'Australia/Darwin' => array(570, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Australia/Eucla' => array(525, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Australia/Hobart' => array(600, array(0,0,2,5,2,0,0,0), 0, array(0,0,2,1,9,0,0,0), 60),
		'Australia/Lindeman' => array(600, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Australia/Lord_Howe' => array(630, array(0,0,2,5,9,0,0,0), 30, array(0,0,2,5,2,0,0,0), 0),
		'Australia/Melbourne' => array(600, array(0,0,2,5,2,0,0,0), 0, array(0,0,2,5,9,0,0,0), 60),
		'Australia/Perth' => array(480, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Australia/Sydney' => array(600, array(0,0,2,5,2,0,0,0), 0, array(0,0,2,5,9,0,0,0), 60),
		'Europe/Amsterdam' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Andorra' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Athens' => array(120, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Belgrade' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Berlin' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Brussels' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Bucharest' => array(120, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Budapest' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Chisinau' => array(120, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Copenhagen' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Dublin' => array(0, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Gibraltar' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Helsinki' => array(120, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Istanbul' => array(120, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Kaliningrad' => array(120, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,5,2,0,0,0), 60),
		'Europe/Kiev' => array(120, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Lisbon' => array(0, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/London' => array(0, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Luxembourg' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Madrid' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Malta' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Minsk' => array(120, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,5,2,0,0,0), 60),
		'Europe/Monaco' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Moscow' => array(180, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,5,2,0,0,0), 60),
		'Europe/Oslo' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Paris' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Prague' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Riga' => array(120, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Rome' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Samara' => array(240, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,5,2,0,0,0), 60),
		'Europe/Simferopol' => array(120, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Sofia' => array(120, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Stockholm' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Tallinn' => array(120, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Tirane' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Uzhgorod' => array(120, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Vaduz' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Vienna' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Vilnius' => array(120, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Volgograd' => array(180, array(0,0,2,5,9,0,0,0), 0, array(0,0,2,5,2,0,0,0), 60),
		'Europe/Warsaw' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Zaporozhye' => array(120, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Europe/Zurich' => array(60, array(0,0,1,5,2,0,0,0), 60, array(0,0,1,5,9,0,0,0), 0),
		'Indian/Antananarivo' => array(180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Indian/Chagos' => array(360, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Indian/Christmas' => array(420, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Indian/Cocos' => array(390, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Indian/Comoro' => array(180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Indian/Kerguelen' => array(300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Indian/Mahe' => array(240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Indian/Maldives' => array(300, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Indian/Mauritius' => array(240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Indian/Mayotte' => array(180, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Indian/Reunion' => array(240, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Apia' => array(-660, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Auckland' => array(720, array(0,0,2,1,9,0,0,0), 60, array(0,0,2,3,2,0,0,0), 0),
		'Pacific/Chatham' => array(765, array(0,45,2,3,2,0,0,0), 0, array(0,45,2,1,9,0,0,0), 60),
		'Pacific/Easter' => array(-360, array(0,0,3,2,2,0,0,0), 0, array(0,0,4,2,9,0,0,0), 60),
		'Pacific/Efate' => array(660, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Enderbury' => array(780, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Fakaofo' => array(-600, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Fiji' => array(720, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Funafuti' => array(720, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Galapagos' => array(-360, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Gambier' => array(-540, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Guadalcanal' => array(660, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Guam' => array(600, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Honolulu' => array(-600, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Johnston' => array(-600, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Kiritimati' => array(840, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Kosrae' => array(660, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Kwajalein' => array(720, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Majuro' => array(720, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Marquesas' => array(-570, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Midway' => array(-660, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Nauru' => array(720, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Niue' => array(-660, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Norfolk' => array(690, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Noumea' => array(660, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Pago_Pago' => array(-660, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Palau' => array(540, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Pitcairn' => array(-480, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Ponape' => array(660, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Port_Moresby' => array(600, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Rarotonga' => array(-600, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Saipan' => array(600, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Tahiti' => array(-600, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Tarawa' => array(720, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Tongatapu' => array(780, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Truk' => array(600, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Wake' => array(720, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
		'Pacific/Wallis' => array(720, array(0,0,0,0,0,0,0,0), 0, array(0,0,0,0,0,0,0,0), 0),
	);
}

/**
 * Display a time period of seconds in a tidy human-readable way.
 *
 * @param  integer		Number of seconds
 * @return string			Human-readable period.
 */
function display_seconds_period($seconds)
{
	$hours=intval(floor(floatval($seconds)/60.0/60.0));
	$minutes=intval(floor(floatval($seconds)/60.0))-60*$hours;
	$seconds=$seconds-60*$minutes;

	$out='';
	if ($hours!=0) $out.=str_pad(strval($hours),2,'0',STR_PAD_LEFT).':';
	/*Expected if (($hours!=0) || ($minutes!=0)) */$out.=str_pad(strval($minutes),2,'0',STR_PAD_LEFT).':';
	$out.=str_pad(strval($seconds),2,'0',STR_PAD_LEFT);
	return $out;
}

/**
 * Display a time period in a tidy human-readable way.
 *
 * @param  integer		Number of seconds
 * @return string			Human-readable period.
 */
function display_time_period($seconds)
{
	if ($seconds<0) return '-'.display_time_period(-$seconds);
	
	if (($seconds<=3*60) && (($seconds%(60)!=0) || ($seconds==0))) return do_lang('SECONDS',integer_format($seconds));
	if (($seconds<=3*60*60) && ($seconds%(60*60)!=0)) return do_lang('MINUTES',integer_format(intval(round(floatval($seconds)/60.0))));
	if (($seconds<=3*60*60*24) && ($seconds%(60*60*24)!=0)) return do_lang('HOURS',integer_format(intval(round(floatval($seconds)/60.0/60.0))));
	return do_lang('DAYS',integer_format(intval(round(floatval($seconds)/60.0/60.0/24.0))));
}

/**
 * Set up the locale filter array from the terse language string specifying it.
 */
function make_locale_filter()
{
	global $LOCALE_FILTER;
	$LOCALE_FILTER=explode(',',do_lang('LOCALE_SUBST'));
	foreach ($LOCALE_FILTER as $i=>$filter)
	{
		if ($filter=='') unset($LOCALE_FILTER[$i]);
		else $LOCALE_FILTER[$i]=explode('=',$filter);
	}
}

/**
 * Get the timezone the server is configured with.
 *
 * @return string			Server timezone in "boring" format.
 */
function get_server_timezone()
{
	global $SERVER_TIMEZONE,$TZ_ZONE_DATA;
	if (is_string($SERVER_TIMEZONE))
	{
		if (isset($TZ_ZONE_DATA[$SERVER_TIMEZONE])) return $SERVER_TIMEZONE;
	}
	
	return 'Europe/London';
}

/**
 * Get the timezone the site is running on.
 *
 * @return string			Site timezone in "boring" format.
 */
function get_site_timezone()
{
	$_timezone_site=get_value('timezone');
	if (is_null($_timezone_site))
	{
		$timezone_site=get_server_timezone();
	}
	elseif (is_numeric($_timezone_site))
	{
		$timezone_site=convert_timezone_offset_to_formal_timezone(floatval($_timezone_site));
		set_value('timezone',$timezone_site);
		set_value('timezone_old_offset',$_timezone_site);
	} else
	{
		$timezone_site=$_timezone_site;
	}
	return $timezone_site;
}

/**
 * Get a user's timezone.
 *
 * @param  ?MEMBER		Member for which the date is being rendered (NULL: current user)
 * @return string			Users timezone in "boring" format.
 */
function get_users_timezone($member=NULL)
{
	if ($member===NULL) $member=get_member();

	global $TIMEZONE_MEMBER_CACHE;
	if (isset($TIMEZONE_MEMBER_CACHE[$member])) return $TIMEZONE_MEMBER_CACHE[$member];

	global $TZ_ZONE_DATA;
	if (($member!=get_member()) && (count($TZ_ZONE_DATA)<=2)) // Oh, we need to reload all our data then
	{
		initialise_timezone_data();
	}

	// Get user timezone
	if ((get_forum_type()=='ocf') && (!is_guest($member)))
	{
		$_timezone_member=$GLOBALS['FORUM_DRIVER']->get_member_row_field($member,'m_timezone_offset');
		if (is_integer($_timezone_member))
		{
			// Database upgrade needed
			$GLOBALS['FORUM_DB']->alter_table_field('f_members','m_timezone_offset','SHORT_TEXT');
		}
		if ((is_integer($_timezone_member)) || (is_numeric($_timezone_member))) // Old date, must upgrade
		{
			$_timezone_old_offset=get_value('timezone_old_offset');
			if (is_null($_timezone_old_offset)) $_timezone_old_offset='0';
			$timezone_member=convert_timezone_offset_to_formal_timezone(floatval($_timezone_member)+floatval($_timezone_old_offset));
		} else // Ah, simple: what member has set
		{
			$timezone_member=$_timezone_member;
		}
	} elseif ((function_exists('ocp_admirecookie')) && (get_option('is_on_timezone_detection')=='1') && (get_option('allow_international')=='1'))
	{
		$client_time=ocp_admirecookie('client_time');
		$client_time_ref=ocp_admirecookie('client_time_ref');

		if ((!is_null($client_time)) && (!is_null($client_time_ref))) // If the client-end has set a time cookie (only available on 2ND request) then we can auto-work-out the timezone
		{
			$client_time=preg_replace('# ([A-Z]{3})([\+\-]\d+)?( \([\w\s]+\))?( \d{4})?$#','${4}',$client_time);
			$timezone_dif=(floatval(strtotime($client_time))-(floatval($client_time_ref)))/60.0/60.0;

			$timezone_numeric=round($timezone_dif,1);
			if (abs($timezone_numeric)>100.0) $timezone_numeric=0.0;
			$timezone_member=convert_timezone_offset_to_formal_timezone($timezone_numeric);
		} else
		{
			$timezone_member=get_site_timezone();
		}
	} else // Ah, simple: site's default
	{
		$timezone_member=get_site_timezone();
	}

	$TIMEZONE_MEMBER_CACHE[$member]=$timezone_member;

	if ($member==get_member()) // Optimisation, clear out timezone data once we have used it
	{
		$server_timezone=get_server_timezone();
		$bak1=$TZ_ZONE_DATA[$server_timezone];
		if (array_key_exists($timezone_member,$TZ_ZONE_DATA))
			$bak2=$TZ_ZONE_DATA[$timezone_member];
		else $bak2=NULL;
		$TZ_ZONE_DATA=array();
		$TZ_ZONE_DATA[$server_timezone]=$bak1;
		$TZ_ZONE_DATA[$timezone_member]=$bak2;
	}

	return $timezone_member;
}

/**
 * Given a timezone offset, make it into a formal timezone.
 *
 * @param  float			Timezone offset.
 * @return string			Users timezone in "boring" format.
 */
function convert_timezone_offset_to_formal_timezone($offset)
{
	$time_now=time();
	$expected=time()+intval(60*60*$offset);

	$zones=get_timezone_list();
	foreach (array_keys($zones) as $zone)
	{
		$converted=tz_time($time_now, $zone);
		if ($converted==$expected)
		{
			if (tz_time($time_now,get_server_timezone())==$converted) return get_server_timezone(); // Prefer to set the site timezone if it is currently the same
			return $zone;
		}
	}
	
	// Could not find one
	
	if (!is_numeric(get_value('timezone'))) return get_site_timezone();
	return get_server_timezone();
}

/**
 * Convert a UTC timestamp to a user timestamp. The user timestamp should not be pumped through get_timezoned_date as this already performs the conversions internally.
 * What complicate understanding of matters is that "user time" is not the timestamp that would exist on a user's PC, as all timestamps are meant to be stored in UTC. "user time" is offsetted to compensate, a virtual construct.
 *
 * @param  ?TIME			Input timestamp (NULL: now)
 * @param  ?MEMBER		Member for which the date is being rendered (NULL: current member)
 * @return TIME			Output timestamp
 */
function servertime_to_usertime($timestamp=NULL,$member=NULL)
{
	if (is_null($timestamp)) $timestamp=time();

	$timezone=get_users_timezone($member);

	return tz_time($timestamp,$timezone);
}

/**
 * Convert a user timestamp to a UTC timestamp. This is not a function to use much- you probably want servertime_to_usertime.
 * What complicate understanding of matters is that "user time" is not the timestamp that would exist on a user's PC, as all timestamps are meant to be stored in UTC. "user time" is offsetted to compensate, a virtual construct.
 *
 * @param  ?TIME			Input timestamp (NULL: now)
 * @param  ?MEMBER		Member for which the date is being rendered (NULL: current member)
 * @return TIME			Output timestamp
 */
function usertime_to_servertime($timestamp=NULL,$member=NULL)
{
	if (is_null($timestamp)) $timestamp=time();

	$timezone=get_users_timezone($member);

	$amount_forward=tz_time($timestamp,$timezone)-$timestamp;
	return $timestamp-$amount_forward;
}

/**
 * Format a local time/date according to locale settings. Combines best features of 'strftime' and 'date'.
 *
 * @param  string	The formatting string.
 * @param  ?TIME	The timestamp (NULL: now).
 * @return string	The formatted string.
 */
function my_strftime($format,$timestamp=NULL)
{
	if (is_null($timestamp)) $timestamp=time();
	
	$ret=strftime(str_replace('%i',date('g',$timestamp),str_replace('%k',date('S',$timestamp),$format)),$timestamp);
	if ($ret===false) $ret='';
	return $ret;
}

/**
 * Get a nice formatted date from the specified Unix timestamp.
 *
 * @param  TIME			Input timestamp
 * @param  boolean		Whether to include the time in the output
 * @param  boolean		Whether to make this a verbose date (longer than usual)
 * @param  boolean		Whether to work in UTC time
 * @param  boolean		Whether contextual dates will be avoided
 * @param  ?MEMBER		Member for which the date is being rendered (NULL: current member)
 * @return string			Formatted time
 */
function get_timezoned_date($timestamp,$include_time=true,$verbose=false,$gmt_time=false,$avoid_contextual_dates=false,$member=NULL)
{
	if (is_null($member)) $member=get_member();
//if (!is_integer($timestamp)) debug_print_backtrace();

	// Work out timezone
	$usered_timestamp=$gmt_time?$timestamp:servertime_to_usertime($timestamp,$member);
	$usered_now_timestamp=$gmt_time?time():servertime_to_usertime(time(),$member);

	if ($usered_timestamp<0)
	{
		if (@strftime('%Y',@mktime(0,0,0,1,1,1963))!='1963') return 'pre-1970';
	}

	// Render basic date
	$date_string1=($verbose)?do_lang('date_verbose_date'):do_lang('date_regular_date'); // The date renderer string
	$joiner=($verbose)?do_lang('date_verbose_joiner'):do_lang('date_regular_joiner');
	$date_string2=($include_time)?($verbose?do_lang('date_verbose_time'):do_lang('date_regular_time')):''; // The time renderer string
	$ret1=my_strftime($date_string1,$usered_timestamp);
	$ret2=($date_string2=='')?'':my_strftime($date_string2,$usered_timestamp);
	$ret=$ret1.(($ret2=='')?'':($joiner.$ret2));

	// If we can do contextual dates, have our shot
	if (get_option('use_contextual_dates')=='0') $avoid_contextual_dates=true;
	if (!$avoid_contextual_dates)
	{
		$today=my_strftime($date_string1,$usered_now_timestamp);

		if ($ret1==$today) // It is/was today
		{
			$ret=/*do_lang('TODAY').$joiner.*/$ret2;
			if ($ret=='') $ret=do_lang('TODAY'); // it'll be because avoid contextual dates is not on
		} else
		{
			$yesterday=my_strftime($date_string1,$usered_now_timestamp-24*60*60);
			if ($ret1==$yesterday) // It is/was yesterday
			{
				$ret=do_lang('YESTERDAY').(($ret2=='')?'':($joiner.$ret2));
			} else
			{
				$week=my_strftime('%U %Y',$usered_timestamp);
				$now_week=my_strftime('%U %Y',$usered_now_timestamp);
				if ($week==$now_week) // It is/was this week
				{
					$date_string1=do_lang('date_withinweek_date'); // The date renderer string
					$joiner=do_lang('date_withinweek_joiner');
					$date_string2=($include_time)?do_lang('date_regular_time'):''; // The time renderer string
					$ret1=my_strftime($date_string1,$usered_timestamp);
					$ret2=($date_string2=='')?'':my_strftime($date_string2,$usered_timestamp);
					$ret=$ret1.(($ret2=='')?'':($joiner.$ret2));
				} // We could go on, and check for month, and year, but it would serve little value - probably would make the user think more than help.
			}
		}
	}

	return locale_filter($ret);
}

/**
 * Filter locale-tainted strings through the locale filter.
 * Let's pretend a user's operating system doesn't fully support they're locale. They have a nice language pack, but whenever the O.S. is asked for dates in the chosen locale, it puts month names in English instead. The locale_filter function is used to cleanup these problems. It does a simple set of string replaces, as defined by the 'locale_subst' language string.
 *
 * @param  string			Tainted string
 * @return string			Filtered string
 */
function locale_filter($ret)
{
	global $LOCALE_FILTER;
	if ($LOCALE_FILTER===NULL) make_locale_filter();
	foreach ($LOCALE_FILTER as $filter)
		if (count($filter)==2) $ret=str_replace($filter[0],$filter[1],$ret);
	return $ret;
}

/**
 * Get a nice formatted time from the specified Unix timestamp.
 *
 * @param  TIME			Input timestamp
 * @param  boolean		Whether contextual times will be avoided. Note that we don't currently use contextual (relative) times. This parameter may be used in the future.
 * @param  ?MEMBER		Member for which the time is being rendered (NULL: current member)
 * @param  boolean		Whether to work in UTC time
 * @return string			Formatted time
 */
function get_timezoned_time($timestamp,$avoid_contextual_dates=false,$member=NULL,$gmt_time=false)
{
	if (is_null($member)) $member=get_member();
	
	if (get_option('use_contextual_dates')=='0') $avoid_contextual_dates=true;
	
	$date_string=do_lang('date_withinday');
	$usered_timestamp=$gmt_time?$timestamp:servertime_to_usertime($timestamp,$member);
	$ret=my_strftime($date_string,$usered_timestamp);

	return locale_filter($ret);
}

/**
 * Check a POST inputted date for validity, and get the Unix timestamp for the inputted date.
 *
 * @param  ID_TEXT		The stub of the parameter name (stub_year, stub_month, stub_day, stub_hour, stub_minute)
 * @param  boolean		Whether to allow over get parameters also
 * @return ?TIME			The timestamp of the date (NULL: no input date was chosen)
 */
function get_input_date($stub,$get_also=false)
{
	require_code('temporal2');
	return _get_input_date($stub,$get_also);
}

/* 
  Based on tzphp 0.1.3 - A small php library for looking up time in remote timezones.
  Copyright (C) 2005 Donald Becker

  This program is free software; you can redistribute it and/or
  modify it under the terms of the GNU General Public License
  as published by the Free Software Foundation; either version 2
  of the License, or (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program; if not, write to the Free Software
  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
*/

/**
 * Find date details for a timestamp.
 *
 * @param  ?TIME			Timestamp (NULL: now)
 * @return array			Date details
 */
function _tz_gmtime($time=NULL)
{
	if($time === NULL) $time = time();
	$lt = localtime($time);
	$lt[5] += 1900; $lt[4]++;
	$gmtime = gmmktime($lt[2], $lt[1], $lt[0], $lt[4], $lt[3], $lt[5]);
	$offset = ($gmtime - $time) / 60;
	$rtime = $time - $offset * 60;
	return localtime($rtime);
}

/**
 * Find whether a year is a leap year.
 *
 * @param  integer		The year
 * @return boolean		Whether it is a leap year
 */
function _tz_is_leap_year($year)
{
	if($year % 4 != 0) return false;
	if($year % 100 != 0) return true;
	if($year % 400 != 0) return false;
	return true;
}

/**
 * Find how many days in a month.
 *
 * @param  integer		Month
 * @param  integer		Year
 * @return integer		Days
 */
function _tz_days_in_month($month, $year)
{
	$days = array(31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);
	if($month >= 12) $month = $month%12;
	if($month == 1) return (_tz_is_leap_year($year) ? 29 : 28);
	return $days[$month];
}

/**
 * Find date offset for date details.
 *
 * @param  array			Date details
 * @param  array			DST details
 * @return integer		Offset
 */
function _tz_checkdate($date, $dst)
{
	// Quick check on months
	if($date[4] > $dst[4]) return 1;
	if($date[4] < $dst[4]) return -1;

	if($dst[6] <= 6)
	{
		$tmp = $date;
		$tmp[3] = 1;
		if($dst[3] == 5)
		{
			$tmp[3] = _tz_days_in_month($tmp[4], $tmp[5] + 1900);
		}

		$tmp = _tz_gmtime(gmmktime($tmp[2], $tmp[1], $tmp[0], $tmp[4], $tmp[3], $tmp[5]+1900));

		if($dst[3] == 5)
		{
			$i = $tmp[6] - $dst[6];
			if($i < 0) $i += 7;
			$day = $tmp[3] - $i;
		} else
		{
			$i = $dst[6] - $tmp[6];
			if($i < 0) $i += 7;
			$day = $tmp[3] + (7 * ($dst[3] - 1)) + $i;
		}
	} else
	{
		// Use day of month
		$day = $dst[3];
	}

	$day = (($day * 24) + $dst[2]) * 60 + $dst[1] * 60;
	$daytime = (($date[3] * 24 + $date[2]) * 60 + $date[1]) * 60 + $date[0];

	if($daytime < $day) return -1;
	if($daytime > $day) return 1;
	return 0;
}

/**
 * For a UTC timestamp, find the local time details.
 *
 * @param  TIME				UTC time
 * @param  string				Timezone (boring style)
 * @return array				Time details
 */
function tz_localtime($time, $zone)
{
	global $TZ_ZONE_DATA;

	// If zone doesnt exist, return local time
	if(!isset($TZ_ZONE_DATA[$zone])) return localtime($time);

	// Adjust for initial offset
	$rtime = $time + ($TZ_ZONE_DATA[$zone][0] * 60);
	$tmout = _tz_gmtime($rtime);

	// return if zone does not practice DST
	if($TZ_ZONE_DATA[$zone][3][4] == 0) return $tmout;

	// Check for daylight time
	$rtime = $time + (($TZ_ZONE_DATA[$zone][0] + $TZ_ZONE_DATA[$zone][2]) * 60);
	$dtm = _tz_gmtime($rtime);
	$dtm[9] = true;
	$st = _tz_checkdate($dtm, $TZ_ZONE_DATA[$zone][3]);

	// Check for standard time
	$rtime = $time + (($TZ_ZONE_DATA[$zone][0] + $TZ_ZONE_DATA[$zone][4]) * 60);
	$stm = _tz_gmtime($rtime);
	$stm[9] = false;
	$dt = _tz_checkdate($stm, $TZ_ZONE_DATA[$zone][1]);

	// Now check if we are in DST or not
	if($TZ_ZONE_DATA[$zone][1][4] < $TZ_ZONE_DATA[$zone][3][4])
	{ /* northern hemisphere */
		if($st < 0 && $dt >= 0) $tmout = $dtm;
		else $tmout = $stm;
	} else
	{
		if($st < 0 || $dt >= 0) $tmout = $stm;
		else $tmout = $dtm;
	}
	return $tmout;
}

/**
 * For a UTC timestamp, find the equivalent virtualised local timestamp.
 *
 * @param  TIME				UTC time
 * @param  string				Timezone (boring style)
 * @return TIME				Virtualised local time
 */
function tz_time($time, $zone)
{
	if (!isset($TZ_ZONE_DATA[$zone]))
	{
		initialise_timezone_data();
	}
	$details=tz_localtime($time, $zone);
	return mktime($details[2],$details[1],$details[0],$details[4]+1,$details[3],$details[5]+1900);
}

/**
 * Get a list of timezones.
 *
 * @return array			Timezone (map between boring-style and human-readable name). Sorted in offset order then likelihood orde.
 */
function get_timezone_list()
{
   return array(
      'Pacific/Niue'=>'(UTC-11:00) Niue, Pago Pago',
      'Pacific/Midway'=>'(UTC-11:00) Midway Island, Samoa',
      'Pacific/Apia'=>'(UTC-11:00) Apia',
      'Pacific/Fakaofo'=>'(UTC-10:00) Fakaofo, Johnston, Rarotonga',
      'America/Adak'=>'(UTC-10:00) Hawaii-Aleutian',
      'Pacific/Honolulu'=>'(UTC-10:00) Hawaii, Honolulu',
      'Pacific/Tahiti'=>'(UTC-10:00) Tahiti',
      'Pacific/Marquesas'=>'(UTC-09:30) Marquesas Islands',
      'America/Juneau'=>'(UTC-09:00) Juneau, Nome, Yakutat',
      'America/Anchorage'=>'(UTC-09:00) Alaska, Anchorage',
      'Pacific/Gambier'=>'(UTC-09:00) Gambier Islands',
      'Pacific/Pitcairn'=>'(UTC-08:00) Pitcairn Islands',
      'America/Tijuana'=>'(UTC-08:00) Baja California, Tijuana',
      'America/Dawson'=>'(UTC-08:00) Dawson, Vancouver, Whitehorse',
      'America/Los_Angeles'=>'(UTC-08:00) Los Angeles, Pacific Time (US & Canada)',
      'America/Boise'=>'(UTC-07:00) Boise',
      'America/Chihuahua'=>'(UTC-07:00) Chihuahua, La Paz (Mexico), Mazatlan',
      'America/Dawson_Creek'=>'(UTC-07:00) Dawson Creek',
      'America/Cambridge_Bay'=>'(UTC-07:00) Cambridge Bay, Edmonton, Inuvik, Yellowknife',
      'America/Denver'=>'(UTC-07:00) Denver, Mountain Time (US & Canada)',
      'America/Hermosillo'=>'(UTC-07:00) Hermosillo',
      'America/Phoenix'=>'(UTC-07:00) Arizona, Phoenix',
      'America/North_Dakota/Center'=>'(UTC-06:00) Center, New Salem',
      'America/Regina'=>'(UTC-06:00) Regina, Saskatchewan',
      'America/Guatemala'=>'(UTC-06:00) Central America, Guatemala',
      'America/Mexico_City'=>'(UTC-06:00) Guadalajara, Mexico City, Monterrey',
      'America/Belize'=>'(UTC-06:00) Belize, Costa Rica, El Salvador, Managua, Swift Current, Tegucigalpa',
      'America/Indiana/Knox'=>'(UTC-06:00) Knox, Menominee, Rainy River, Rankin Inlet, Winnipeg',
      'America/Chicago'=>'(UTC-06:00) Central Time (US & Canada), Chicago',
      'America/Merida'=>'(UTC-06:00) Merida',
      'Pacific/Easter'=>'(UTC-06:00) Easter Island',
      'Pacific/Galapagos'=>'(UTC-06:00) Galapagos',
      'America/Havana'=>'(UTC-05:00) Cuba',
      'America/Atikokan'=>'(UTC-05:00) Atikokan, Cayman, Jamaica, Panama, Port-au-Prince',
      'America/Detroit'=>'(UTC-05:00) Detroit, Grand Turk, Iqaluit, Louisville, Marengo, Monticello',
      'America/Montreal'=>'(UTC-05:00) Montreal, Nassau, Nipigon, Pangnirtung, Petersburg, Thunder Bay',
      'America/Toronto'=>'(UTC-05:00) Toronto, Vevay, Vincennes',
      'America/New_York'=>'(UTC-05:00) Eastern Time (US & Canada), New York',
      'America/Guayaquil'=>'(UTC-05:00) Guayaquil',
      'America/Bogota'=>'(UTC-05:00) Bogota, Lima, Quito',
      'America/Indiana/Indianapolis'=>'(UTC-05:00) Indiana (East), Indianapolis',
      'America/Caracas'=>'(UTC-04:30) Caracas',
      'America/Anguilla'=>'(UTC-04:00) Anguilla, Antigua, Curacao, Montserrat, St. Thomas',
      'Atlantic/Stanley'=>'(UTC-04:00) Faukland Islands',
      'Antarctica/Palmer'=>'(UTC-04:00) Palmer',
      'America/Aruba'=>'(UTC-04:00) Aruba, Barbados, Blanc-Sablon, Dominica, Grenada, Guadeloupe',
      'America/Martinique'=>'(UTC-04:00) Martinique, Port of Spain, Puerto Rico, Santo Domingo, St. Kitts, St. Lucia',
      'America/St_Vincent'=>'(UTC-04:00) St. Vincent, Tortola',
      'America/Goose_Bay'=>'(UTC-04:00) Atlantic Time (Goose Bay), Bermuda, Moncton',
      'America/Halifax'=>'(UTC-04:00) Atlantic Time (Canada), Halifax',
      'America/Boa_Vista'=>'(UTC-04:00) Boa Vista, Eirunepe, Porto Velho, Rio Branco',
      'America/Campo_Grande'=>'(UTC-04:00) Brazil, Cuiaba',
      'America/Manaus'=>'(UTC-04:00) Manaus',
      'America/Guyana'=>'(UTC-04:00) Guyana',
      'America/Thule'=>'(UTC-04:00) Thule',
      'America/Santiago'=>'(UTC-04:00) Santiago',
      'America/Asuncion'=>'(UTC-04:00) Asuncion',
      'America/La_Paz'=>'(UTC-04:00) Georgetown, La Paz (Bolivia), San Juan',
      'America/St_Johns'=>'(UTC-03:30) Newfoundland, St. Johns',
      'America/Argentina/Buenos_Aires'=>'(UTC-03:00) Buenos Aires',
      'America/Argentina/Catamarca'=>'(UTC-03:00) Catamarca, Cordoba, Jujuy, La Rioja, Mendoza, Rio Gallegos',
      'Antarctica/Rothera'=>'(UTC-03:00) Rothera, Tucuman, Ushuaia',
      'America/Araguaina'=>'(UTC-03:00) Araguaina, Bahia, Belem, Fortaleza, Maceio, Recife',
      'America/Sao_Paulo'=>'(UTC-03:00) Brasilia, Sao Paulo',
      'America/Godthab'=>'(UTC-03:00) Greenland',
      'America/Montevideo'=>'(UTC-03:00) Montevideo',
      'America/Cayenne'=>'(UTC-03:00) Cayenne',
      'America/Miquelon'=>'(UTC-03:00) Miquelon, St. Pierre',
      'America/Paramaribo'=>'(UTC-03:00) Paramaribo',
      'Atlantic/South_Georgia'=>'(UTC-02:00) South Georgia',
      'America/Noronha'=>'(UTC-02:00) Mid-Atlantic',
      'Atlantic/Azores'=>'(UTC-01:00) Azores',
      'Atlantic/Cape_Verde'=>'(UTC-01:00) Cape Verde Islands',
      'America/Scoresbysund'=>'(UTC-01:00) Scoresbysund',
      'Africa/El_Aaiun'=>'(UTC) El Aaiun, St. Helena',
      'Atlantic/Madeira'=>'(UTC) Madeira',
      'Europe/London'=>'(UTC) Belfast, Dublin, Edinburgh, Lisbon, London',
      'Africa/Abidjan'=>'(UTC) Abidjan, Accra, Bamako, Banjul, Bissau, Conakry',
      'Africa/Dakar'=>'(UTC) Dakar, Danmarkshavn, Freetown, Lome, Nouakchott, Ouagadougou',
      'Africa/Sao_Tome'=>'(UTC) Sao Tome',
      'Africa/Monrovia'=>'(UTC) Monrovia, Reykjavik',
      'Africa/Casablanca'=>'(UTC) Casablanca',
      'Atlantic/Canary'=>'(UTC) Canary, Faroe',
      'Europe/Belgrade'=>'(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague',
      'Europe/Warsaw'=>'(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb',
      'Europe/Andorra'=>'(UTC+01:00) Andorra, Ceuta, Gibraltar, Luxembourg, Malta, Monaco',
      'Europe/Oslo'=>'(UTC+01:00) Oslo, Tirane, Tunis, Vaduz, Zurich',
      'Africa/Windhoek'=>'(UTC+01:00) Windhoek',
      'Europe/Brussels'=>'(UTC+01:00) Brussels, Copenhagen, Madrid, Paris',
      'Africa/Algiers'=>'(UTC+01:00) Algiers, West Central Africa',
      'Europe/Amsterdam'=>'(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna',
      'Africa/Bangui'=>'(UTC+01:00) Bangui, Brazzaville, Douala, Kinshasa, Lagos, Libreville',
      'Africa/Luanda'=>'(UTC+01:00) Luanda, Malabo, Ndjamena, Niamey, Porto-Novo',
      'Asia/Gaza'=>'(UTC+02:00) Gaza',
      'Europe/Simferopol'=>'(UTC+02:00) Simferopol, Uzhgorod, Zaporozhye',
      'Africa/Bujumbura'=>'(UTC+02:00) Bujumbura, Gaborone, Kigali, Lubumbashi, Lusaka, Maputo',
      'Europe/Minsk'=>'(UTC+02:00) Minsk',
      'Africa/Tripoli'=>'(UTC+02:00) Tripoli',
      'Europe/Chisinau'=>'(UTC+02:00) Chisinau, Kaliningrad, Nicosia, Syria',
      'Africa/Cairo'=>'(UTC+02:00) Cairo',
      'Europe/Helsinki'=>'(UTC+02:00) Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius',
      'Europe/Athens'=>'(UTC+02:00) Athens, Bucharest, Istanbul',
      'Asia/Jerusalem'=>'(UTC+02:00) Jerusalem',
      'Asia/Amman'=>'(UTC+02:00) Amman',
      'Asia/Beirut'=>'(UTC+02:00) Beirut',
      'Africa/Blantyre'=>'(UTC+02:00) Blantyre, Harare, Pretoria',
      'Africa/Johannesburg'=>'(UTC+02:00) Johannesburg, Maseru, Mbabane',
      'Asia/Kuwait'=>'(UTC+03:00) Kuwait, Riyadh',
      'Asia/Aden'=>'(UTC+03:00) Aden, Bahrain',
      'Asia/Baghdad'=>'(UTC+03:00) Baghdad',
      'Asia/Qatar'=>'(UTC+03:00) Qatar, Syowa',
      'Africa/Nairobi'=>'(UTC+03:00) Nairobi',
      'Africa/Addis_Ababa'=>'(UTC+03:00) Addis Ababa, Antananarivo, Asmara, Comoro, Dar es Salaam, Djibouti',
      'Africa/Kampala'=>'(UTC+03:00) Kampala, Khartoum, Mayotte, Mogadishu',
      'Europe/Moscow'=>'(UTC+03:00) Moscow, St. Petersburg, Volgograd',
      'Asia/Tehran'=>'(UTC+03:30) Tehran',
      'Asia/Dubai'=>'(UTC+04:00) Abu Dhabi, Muscat',
      'Asia/Baku'=>'(UTC+04:00) Baku',
      'Asia/Yerevan'=>'(UTC+04:00) Yerevan',
      'Asia/Tbilisi'=>'(UTC+04:00) Tbilisi',
      'Indian/Mauritius'=>'(UTC+04:00) Mauritius, Port Louis',
      'Indian/Reunion'=>'(UTC+04:00) Reunion',
      'Europe/Samara'=>'(UTC+04:00) Samara',
      'Indian/Mahe'=>'(UTC+04:00) Mahe',
      'Asia/Kabul'=>'(UTC+04:30) Kabul',
      'Indian/Kerguelen'=>'(UTC+05:00) Kerguelen',
      'Indian/Maldives'=>'(UTC+05:00) Maldives',
      'Asia/Karachi'=>'(UTC+05:00) Islamabad, Karachi',
      'Asia/Dushanbe'=>'(UTC+05:00) Dushanbe',
      'Asia/Ashgabat'=>'(UTC+05:00) Ashgabat',
      'Asia/Samarkand'=>'(UTC+05:00) Samarkand',
      'Asia/Tashkent'=>'(UTC+05:00) Tashkent',
      'Asia/Aqtau'=>'(UTC+05:00) Aqtau, Aqtobe',
      'Asia/Oral'=>'(UTC+05:00) Oral',
      'Asia/Yekaterinburg'=>'(UTC+05:00) Ekaterinburg',
      'Asia/Calcutta'=>'(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi',
      'Asia/Colombo'=>'(UTC+05:30) Colombo, Sri Jayawardenepura',
      'Asia/Katmandu'=>'(UTC+05:45) Kathmandu',
      'Indian/Chagos'=>'(UTC+06:00) Chagos, Mawson, Vostok',
      'Asia/Thimphu'=>'(UTC+06:00) Thimphu',
      'Asia/Dhaka'=>'(UTC+06:00) Astana, Dhaka',
      'Asia/Qyzylorda'=>'(UTC+06:00) Qyzylorda',
      'Asia/Bishkek'=>'(UTC+06:00) Bishkek',
      'Asia/Almaty'=>'(UTC+06:00) Almaty, Novosibirsk',
      'Asia/Omsk'=>'(UTC+06:00) Omsk',
      'Indian/Cocos'=>'(UTC+06:30) Cocos',
      'Asia/Rangoon'=>'(UTC+06:30) Yangon (Rangoon)',
      'Indian/Christmas'=>'(UTC+07:00) Christmas, Davis, Pontianak, Saigon',
      'Asia/Hovd'=>'(UTC+07:00) Hovd',
      'Asia/Krasnoyarsk'=>'(UTC+07:00) Krasnoyarsk',
      'Asia/Phnom_Penh'=>'(UTC+07:00) Phnom Penh, Vientiane',
      'Asia/Bangkok'=>'(UTC+07:00) Bangkok, Hanoi, Jakarta',
      'Antarctica/Casey'=>'(UTC+08:00) Casey, Harbin, Kashgar, Kuching',
      'Asia/Brunei'=>'(UTC+08:00) Brunei',
      'Asia/Makassar'=>'(UTC+08:00) Makassar',
      'Asia/Shanghai'=>'(UTC+08:00) Shanghai',
      'Asia/Hong_Kong'=>'(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi',
      'Asia/Macau'=>'(UTC+08:00) Macau',
      'Asia/Irkutsk'=>'(UTC+08:00) Irkutsk, Ulaan Bataar',
      'Asia/Manila'=>'(UTC+08:00) Manila',
      'Asia/Kuala_Lumpur'=>'(UTC+08:00) Kuala Lumpur, Singapore',
      'Asia/Taipei'=>'(UTC+08:00) Taipei',
      'Australia/Perth'=>'(UTC+08:00) Perth',
      'Australia/Eucla'=>'(UTC+08:45) Eucla',
      'Asia/Choibalsan'=>'(UTC+09:00) Choibalsan',
      'Asia/Jayapura'=>'(UTC+09:00) Jayapura',
      'Asia/Pyongyang'=>'(UTC+09:00) Pyongyang',
      'Asia/Seoul'=>'(UTC+09:00) Seoul',
      'Pacific/Palau'=>'(UTC+09:00) Palau',
      'Asia/Dili'=>'(UTC+09:00) Dili',
      'Asia/Tokyo'=>'(UTC+09:00) Osaka, Sapporo, Tokyo',
      'Asia/Yakutsk'=>'(UTC+09:00) Yakutsk',
      'Australia/Darwin'=>'(UTC+09:30) Darwin',
      'Australia/Broken_Hill'=>'(UTC+09:30) Broken Hill',
      'Australia/Adelaide'=>'(UTC+09:30) Adelaide',
      'Antarctica/DumontDUrville'=>'(UTC+10:00) DumontDUrville, Saipan',
      'Australia/Melbourne'=>'(UTC+10:00) Canberra, Melbourne, Sydney',
      'Australia/Currie'=>'(UTC+10:00) Currie, Lindeman',
      'Australia/Brisbane'=>'(UTC+10:00) Brisbane',
      'Asia/Sakhalin'=>'(UTC+10:00) Sakhalin',
      'Australia/Hobart'=>'(UTC+10:00) Hobart',
      'Pacific/Truk'=>'(UTC+10:00) Truk',
      'Asia/Vladivostok'=>'(UTC+10:00) Vladivostok',
      'Pacific/Guam'=>'(UTC+10:00) Guam, Port Moresby',
      'Australia/Lord_Howe'=>'(UTC+10:30) Lord Howe Island',
      'Asia/Magadan'=>'(UTC+11:00) Magadan, New Caledonia, Solomon Islands',
      'Pacific/Kosrae'=>'(UTC+11:00) Kosrae',
      'Pacific/Noumea'=>'(UTC+11:00) Noumea',
      'Pacific/Ponape'=>'(UTC+11:00) Ponape',
      'Pacific/Guadalcanal'=>'(UTC+11:00) Guadalcanal',
      'Pacific/Efate'=>'(UTC+11:00) Efate',
      'Pacific/Norfolk'=>'(UTC+11:30) Norfolk Island',
      'Asia/Anadyr'=>'(UTC+12:00) Anadyr',
      'Pacific/Wake'=>'(UTC+12:00) Wake',
      'Antarctica/McMurdo'=>'(UTC+12:00) McMurdo',
      'Pacific/Fiji'=>'(UTC+12:00) Fiji, Marshall Islands',
      'Pacific/Tarawa'=>'(UTC+12:00) Tarawa',
      'Asia/Kamchatka'=>'(UTC+12:00) Kamchatka',
      'Pacific/Kwajalein'=>'(UTC+12:00) Kwajalein, Majuro',
      'Pacific/Nauru'=>'(UTC+12:00) Nauru',
      'Pacific/Auckland'=>'(UTC+12:00) Auckland, Wellington',
      'Pacific/Funafuti'=>'(UTC+12:00) Funafuti',
      'Pacific/Wallis'=>'(UTC+12:00) Wallis',
      'Pacific/Chatham'=>'(UTC+12:45) Chatham Islands',
      'Pacific/Enderbury'=>'(UTC+13:00) Enderbury',
      'Pacific/Tongatapu'=>'(UTC+13:00) Nuku Alofa, Tongatapu',
      'Pacific/Kiritimati'=>'(UTC+14:00) Kiritimati'
   );
}

/**
 * Turn a boring timezone name into the pretty shortened list of ones Microsoft uses and others now use too.
 *
 * @param  string			Boring name
 * @return string			Nice name
 */
function make_nice_timezone_name($in)
{
	$list=get_timezone_list();
	if (array_key_exists($in,$list)) return $list[$in];
	return $in;
}
