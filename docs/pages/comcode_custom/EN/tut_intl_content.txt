[title sub="Written by Chris Graham, ocProducts"]ocPortal Tutorial: Localisation and internationalisation[/title]

ocPortal can have its content translated and delivered for each language, without requiring any duplication.

This is a very advanced feature that only a very small proportion of users will want. It is intended for large websites produced by tightly-managed sites that have an active team of human translators.

[contents]decimal,lower-alpha[/contents]

ocPortal's multi-language support is available when all the following conditions are met:
1) you have more than one language installed
2) you have the [concept]OCF[/concept] "Enable regionalisation" option enabled
3) you either installed initially with it on, or you have run the OcCLE command to enable it

[title="2"]Pros and Cons[/title]

Pros:
 - Support your content in multiple languages from a single website and content repository

Cons:
 - Requires active translator(s)
 - Makes development more complex, the [tt]translate[/tt] table must be used for all content strings
 - Makes hand-editing the database much harder
 - May slow website searching

In short: Use it if you need it, and prepare for the extra cost and complexity. It's an ideal feature for those that need it.

[title="2"]OcCLE command[/title]

The OcCLE command may take some time to run. It is advised you therefore run the SSH version of OcCLE, rather than the webapp. Log into SSH on your server (or equivalent process to receive a command prompt) and type:
[code]
php data/occle.php
[/code]
(assumes you run it from the ocPortal base directory, and that the '[tt]php[/tt]' command is in your path)

Then the OcCLE command required is:
[code]
:require_code('database_multi_lang_conv'); enable_content_translation();
[/code]

Depending on the size of your database, the command could take hours to run. You can monitor it progress through tables via MySQL ([tt]SHOW FULL PROCESSLIST[/tt]).

To understand what the content translation can do, and how it works, we need to consider the following cases:
1) Sending newsletters
2) Editing theme images
3) Editing Comcode pages
4) Using the Zone Editor
5) [i]Everything else[/i]

For '1' (newsletters), you will get a choice what language to send it for when you go to the newsletter module. Subscribers choose their language when they sign up.

For '2'-'4', you will get a choice of language which to edit under when you go to the respective section of ocPortal. What you save will be saved accordingly.

You will notice for any of '1'-'4', when you choose your language you will temporarily see the website in the language you are working under, until you finish. This is useful, but also ocPortal does it for architectural reasons. Be aware however, that the reason content is saved in a certain language here is due to the language selection you just made, and not necessarily directly related to the language you are viewing. This will be clarified in the next paragraph.

For '5', translation is performed in a special 'Translate content' part of the Admin Zone. It is crucial to understand that it is [b]not[/b] performed just by editing content to your own language on normal edit screens. Content added to ocPortal is saved against the language being used by the submitter (except from '1' to '4' above). Therefore, when adding content you must ensure you have the right language choice, and a good rule of thumb to check this is by seeing if the language ocPortal is uses in its interface matches the language you expect to be submitting content in. When editing content, the content is always saved against the language you see it in when you are editing -- if it has been translated already then it will be edited as such, otherwise it will still be in the original submitted language -- [b]never translate from an edit screen[/b]. If something is edited (so long as there were actual changes), all translations are automatically marked 'broken', and will be put back into the translation queue.

You will see there is an option in the footer for opening up a 'Translate content' screen just with language strings that were included on the page you are viewing.

In ocPortal almost [i]everything[/i] (*) can be translated, but obviously you would not want to translate every forum post for a large community (for example). For this reason, ocPortal saves language with 'priorities', and that of the highest priority will be presented for translation first. For example, the names of zones would be the highest priority, whilst forum posts would be the lowest.

(*) A few things cannot be translated such as forum names. The reasoning is that you [i]do not want[/i] such things translated, but rather you should have a different copy of each forum for each language. This is an exceptional situation, and is only designed like this due to the way forums are used. Other kinds of category may be translated as described above.

[title="2"]Additional requirements[/title]

All sites on an ocPortal multi-site-network must have the same multi-lang-content status (i.e. all have it, or all not have it).

[title="2"]See also[/title]

 - [page="_SEARCH:tut_intl"]Localisation and internationalisation[/page]
 - [page="_SEARCH:tut_intl_users"]Translating ocPortal[/page]

{$SET,tutorial_tags,Internationalisation,expert}{$SET,tutorial_add_date,Aug 2014}{$SET,tutorial_summary,Multi-language content translations within ocPortal.}[block]main_tutorial_rating[/block]
