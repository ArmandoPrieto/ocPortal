application: ocportal
version: 1
runtime: php
api_version: 1
threadsafe: yes

handlers:
- url: ^/([=]*)pages/(modules|modules\_custom)/([/]*)\.php
  script: /\1index.php\?page=\3
- url: ^/([=]*)pg/s/([\&\?]*)/index\.php
  script: /\1index.php\?page=wiki&id=\2
- url: ^/([=]*)pg/galleries/image/([\&\?]*)/index\.php(.*)
  script: /\1index.php\?page=galleries&type=image&id=\2\3
- url: ^/([=]*)pg/galleries/video/([\&\?]*)/index\.php(.*)
  script: /\1index.php\?page=galleries&type=video&id=\2\3
- url: ^/([=]*)pg/iotds/view/([\&\?]*)/index\.php(.*)
  script: /\1index.php\?page=iotds&type=view&id=\2\3
- url: ^/([=]*)pg/([/\&\?]*)/([/\&\?]*)/([\&\?]*)/index\.php(.*)
  script: /\1index.php\?page=\2&type=\3&id=\4\5
- url: ^/([=]*)pg/([/\&\?]*)/([/\&\?]*)/index\.php(.*)
  script: /\1index.php\?page=\2&type=\3\4
- url: ^/([=]*)pg/([/\&\?]*)/index\.php(.*)
  script: /\1index.php\?page=\2\3
- url: ^/([=]*)pg/index\.php(.*)
  script: /\1index.php\?page=\3
- url: ^/([=]*)pg/s/([\&\?]*)
  script: /\1index.php\?page=wiki&id=\2
- url: ^/([=]*)pg/galleries/image/([\&\?]*)
  script: /\1index.php\?page=galleries&type=image&id=\2\3
- url: ^/([=]*)pg/galleries/video/([\&\?]*)
  script: /\1index.php\?page=galleries&type=video&id=\2\3
- url: ^/([=]*)pg/iotds/view/([\&\?]*)
  script: /\1index.php\?page=iotds&type=view&id=\2
- url: ^/([=]*)pg/([/\&\?]*)/([/\&\?]*)/([\&\?]*)/
  script: /\1index.php\?page=\2&type=\3&id=\4
- url: ^/([=]*)pg/([/\&\?]*)/([/\&\?]*)/([\&\?]*)
  script: /\1index.php\?page=\2&type=\3&id=\4
- url: ^/([=]*)pg/([/\&\?]*)/([/\&\?]*)
  script: /\1index.php\?page=\2&type=\3
- url: ^/([=]*)pg/([/\&\?]*)
  script: /\1index.php\?page=\2
- url: ^/([=]*)pg/s/([\&\?\.]*)&(.*)
  script: /\1index.php\?\3&page=wiki&id=\2
- url: ^/([=]*)pg/galleries/image/([/\&\?\.]*)&(.*)
  script: /\1index.php\?\5&page=galleries&type=image&id=\2&\3
- url: ^/([=]*)pg/galleries/video/([/\&\?\.]*)&(.*)
  script: /\1index.php\?\5&page=galleries&type=video&id=\2&\3
- url: ^/([=]*)pg/iotds/view/([/\&\?\.]*)&(.*)
  script: /\1index.php\?\3&page=iotds&type=view&id=\2
- url: ^/([=]*)pg/([/\&\?\.]*)/([/\&\?\.]*)/([/\&\?\.]*)&(.*)
  script: /\1index.php\?\5&page=\2&type=\3&id=\4
- url: ^/([=]*)pg/([/\&\?\.]*)/([/\&\?\.]*)&(.*)
  script: /\1index.php\?\4&page=\2&type=\3
- url: ^/([=]*)pg/([/\&\?\.]*)&(.*)
  script: /\1index.php\?\3&page=\2
- url: ^/(site|forum|adminzone|cms|collaboration)/s/([\&\?]*)\.htm
  script: /\1/index.php\?page=wiki&id=\2
- url: ^/s/([\&\?]*)\.htm
  script: /index\.php\?page=wiki&id=\1
- url: ^/(site|forum|adminzone|cms|collaboration)/galleries/image/([\&\?]*)\.htm
  script: /\1/index.php\?page=galleries&type=image&id=\2
- url: ^/(site|forum|adminzone|cms|collaboration)/galleries/video/([\&\?]*)\.htm
  script: /\1/index.php\?page=galleries&type=video&id=\2
- url: ^/(site|forum|adminzone|cms|collaboration)/iotds/view/([\&\?]*)\.htm
  script: /\1/index.php\?page=iotds&type=view&id=\2
- url: ^/(site|forum|adminzone|cms|collaboration)/([/\&\?]+)/([/\&\?]*)/([\&\?]*)\.htm
  script: /\1/index.php\?page=\2&type=\3&id=\4
- url: ^/(site|forum|adminzone|cms|collaboration)/([/\&\?]+)/([/\&\?]*)\.htm
  script: /\1/index.php\?page=\2&type=\3
- url: ^/(site|forum|adminzone|cms|collaboration)/([/\&\?]+)\.htm
  script: /\1/index.php\?page=\2
- url: ^/([/\&\?]+)/([/\&\?]*)/([\&\?]*)\.htm
  script: /index.php\?page=\1&type=\2&id=\3
- url: ^/([/\&\?]+)/([/\&\?]*)\.htm
  script: /index.php\?page=\1&type=\2
- url: ^/([/\&\?]+)\.htm
  script: /index.php\?page=\1
#- url: ^/(site|forum|adminzone|cms|collaboration)/s/([\&\?]*)
#  script: /\1/index.php\?page=wiki&id=\2
#- url: ^/s/([\&\?]*)
#  script: /index\.php\?page=wiki&id=\1
#- url: ^/(site|forum|adminzone|cms|collaboration)/galleries/image/([\&\?]*)
#  script: /\1/index.php\?page=galleries&type=image&id=\2
#- url: ^/(site|forum|adminzone|cms|collaboration)/galleries/video/([\&\?]*)
#  script: /\1/index.php\?page=galleries&type=video&id=\2
#- url: ^/(site|forum|adminzone|cms|collaboration)/iotds/view/([\&\?]*)
#  script: /\1/index.php\?page=iotds&type=view&id=\2
#- url: ^/(site|forum|adminzone|cms|collaboration)/([/\&\?]+)/([/\&\?]*)/([\&\?]*)
#  script: /\1/index.php\?page=\2&type=\3&id=\4
#- url: ^/(site|forum|adminzone|cms|collaboration)/([/\&\?]+)/([/\&\?]*)
#  script: /\1/index.php\?page=\2&type=\3
#- url: ^/(site|forum|adminzone|cms|collaboration)/([/\&\?]+)
#  script: /\1/index.php\?page=\2
#- url: ^/([/\&\?]+)/([/\&\?]*)/([\&\?]*)
#  script: /index.php\?page=\1&type=\2&id=\3
#- url: ^/([/\&\?]+)/([/\&\?]*)
#  script: /index.php\?page=\1&type=\2
#- url: ^/([/\&\?]+)
#  script: /index.php\?page=\1
- url: ^.*\.(css|csv|cur|dat|gif|gz|htm|html|ico|ini|jar|jpg|js|json|mp3|pdf|png|pre|svg|swf|tar|tpl|ttf|txt|wav|xml|xsl|zip)
  static_files: \1
  upload: ^.*\.(css|csv|cur|dat|gif|gz|htm|html|ico|ini|jar|jpg|js|json|mp3|pdf|png|pre|svg|swf|tar|tpl|ttf|txt|wav|xml|xsl|zip)
  application_readable: true
- url: /_ah/mail/tickets@appid.appspotmail.com
  script: data/incoming_ticket_email.php
  login: admin
- url: /_ah/bounce
  script: data/incoming_bounced_email.php
  login: admin
- url: .*
  script: /index.php\?page=404

skip_files:
- ^uploads/(?<!website_specific/).*
- ^caches/.*
- ^data_custom/errorlog.php$
- ^safe_mode_temp/.*

inbound_services:
- mail
- mail_bounce

admin_console:
  pages:
  - name: Admin Zone
    url: /adminzone

pagespeed:
  enabled_rewriters:
  - CollapseWhitespace
  - ElideAttributes
  - RemoveComments
  - RemoveQuotes
  - LeftTrimUrls
  disabled_rewriters:
  - ConvertMetaTags
  - InlineCss
  - InlinePreviewImages
  - CombineCss
  - CombineJs
